(()=>{"use strict";var e,i;window.jQuery,e=jQuery,(i=e.extend({emailSubjectSelector:"#email-subject",emailPreviewButtonSelector:"#preview-email",emailBodyIframeSelector:"#ticket_email_editor_ifr",productId:"#product-id",emailPreviewSelector:"#email-preview-container"},wcBoxOfficeParams)).init=function(){i.bindEvents()},i.bindEvents=function(){e(i.emailPreviewButtonSelector).on("click",i.previewEmail),e(i.pastEmailsSelector).on("click",i.deletePastEmailSelector,i.deletePastEmail)},i.previewEmail=function(t){var r=e(i.emailSubjectSelector).val(),o=e(i.productId).val(),l=e(i.emailBodyIframeSelector).contents().find("#tinymce").html();if(e(i.emailPreviewButtonSelector).prop("disabled",!0).css("cursor","wait"),!o||!l)return alert(i.i18n_previewEmptyProductOrBody),void e(i.emailPreviewButtonSelector).prop("disabled",!1).css("cursor","pointer");e.post(i.ajaxurl,{action:i.previewEmailAction,product_id:o,content:l,subject:r,wc_box_office_admin_test_email_nonce:i.previewEmailNonce}).done(i.previewEmailDone)},i.previewEmailDone=function(t){e(i.emailPreviewSelector).html(t).slideDown("fast"),e(i.emailPreviewButtonSelector).prop("disabled",!1).css("cursor","pointer")},e(i.init)})();