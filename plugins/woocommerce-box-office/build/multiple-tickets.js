(()=>{"use strict";var e={43:(e,t,i)=>{i.d(t,{U:()=>n}),i(428);const r=window.wcBOTicketFormParams,a=e=>{e.is(":checked")?(e.removeAttr("required"),e[0]&&e[0].setCustomValidity("")):(e[0]&&r.checkboxValidationMsg&&e[0].setCustomValidity(r.checkboxValidationMsg),e.attr("required","required"))},n=e=>{if(r&&r.requiredCheckboxes){let t=r.fieldPrefix||"ticket_fields[0]";t=t.replace("[0]","["+e+"]"),r.requiredCheckboxes.forEach((function(e){const i=jQuery('input[type="checkbox"][name="'+t+"["+e+"][]");i.on("change",(function(){a(i)})),a(i)}))}};jQuery(document).ready((function(){r&&r.requiredCheckboxes&&(r.multipleTickets||n(0))}))},428:e=>{e.exports=window.jQuery}},t={};function i(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(428),window.backbone;var r,a,n,s,o=i(43);r=jQuery,a=r.extend({formSelector:".wc-box-office-ticket-form",templateDOMSelector:".wc-box-office-ticket-fields:first",fieldsTemplate:{}},ticketFormParams),n=Backbone.View.extend({initialize:function(e){this.qty=a.is_admin?r('[name="quantity"]'):this.$el.parent().find('[name="quantity"]:first');var t=this;this.qty.on("change",(function(){t.updateQty()})),this.addToCart=r(".wc-box-office-ticket-form").parent().find(".single_add_to_cart_button"),this.tickets=[],this.prevTicketEls=[]},updateQty:function(){this.removeTickets(),this.render()},render:function(){var e=parseInt(this.qty.val(),10),t=0;this.qty.length||(e=1);for(var i=0;i<e;i++){var n=new s({index:i,parent:this});if(this.tickets.push(n),this.$el.append(n.render().el),a.posted_data&&a.posted_data[i])for(var c in a.posted_data[i]){var l=a.posted_data[i][c];l&&this.setElValue(r('[id^="field_'+c+'"]',n.$el),l)}this.prevTicketEls[i]&&(this.prevTicketEls[i].hasClass("active")&&(n.toggle(),t+=1),this.copyValuesFromPreviousElement(i)),"function"==typeof o.U&&(0,o.U)(i)}return a.posted_data=[],!t&&this.tickets[0]&&this.tickets[0].toggle(),this.updateAddToCartText(),this},copyValuesFromPreviousElement:function(e){var t=this;r(".ticket-field-input",this.prevTicketEls[e]).each((function(){var e,i=r(this),a=i.attr("id");["radio","checkbox"].includes(i.attr("type"))?i.is(":checked")&&(e=i.val()):e=i.val(),e&&t.setElValue(r("#"+a,this.$el),e)}))},setElValue:function(e,t){"INPUT"===e.prop("nodeName")&&["radio","checkbox"].includes(e.attr("type"))?e.each((function(){r(this).prop("checked",t===this.value)})):e.val(t)},removeTickets:function(){for(;this.prevTicketEls.length;)this.prevTicketEls.pop().remove();for(;this.tickets.length;){var e=this.tickets.shift();this.prevTicketEls.push(e.$el.clone()),e.remove()}},updateAddToCartText:function(){var e=parseInt(this.qty.val(),10),t=a.i18n_add_to_cart_singular;e>1&&(t=a.i18n_add_to_cart_plural),this.addToCart.text(t)}}),s=Backbone.View.extend({tagName:"div",active:!1,className:"wc-box-office-ticket-fields",events:{"click .wc-box-office-ticket-fields-title a":"toggle"},initialize:function(e){this.index=e.index||0,this.parent=e.parent},toggle:function(e){this.active=!this.active,this.$el.toggleClass("active",this.active),e&&e.preventDefault()},render:function(){return this.$el.html(a.getFieldsTemplate(this.parent)),this.updateFieldIndex(),this.updateTitle(),this},updateFieldIndex:function(){var e=this.$el,t=r('[name^="'+a.field_name_prefix+'"]',e),i=this.index;t.each((function(){var t=r(this).attr("name").substr(a.field_name_prefix.length),n=a.field_name_prefix.replace("[0]","["+i+"]")+t,s=r(this).attr("id"),o=s?s+"_"+i:"";r(this).attr("name",n),r(this).attr("id",o),r('label[for="'+s+'"]',e).attr("for",o)})),this.$el.attr("data-index",i)},updateTitle:function(){r(".wc-box-office-ticket-fields-title a",this.$el).html(a.i18n_ticket_title_prefix+(this.index+1))}}),a.getFieldsTemplate=function(e){if(!a.fieldsTemplate[e.cid]&&e.$el.find(a.templateDOMSelector).length){var t=e.$el.find(a.templateDOMSelector);a.fieldsTemplate[e.cid]=t.clone().removeAttr("style").html(),t.remove()}return a.fieldsTemplate[e.cid]},a.run=function(){r(a.formSelector).each((function(){var e=r(this);new n({el:e}).render()}))},r(a.run)})();